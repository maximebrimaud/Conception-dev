




CREATE TABLE APP.USERS (
		ID_USER  			   INT 			NOT NULL GENERATED ALWAYS AS IDENTITY  (START WITH 1 ,INCREMENT BY 1),
		NOM_USER   			   VARCHAR(50)  NOT NULL,
		PRENOM_USER 		   VARCHAR(50)  NOT NULL,
		DATE_OF_BIRTH 		   DATE 		NOT NULL,
		SEXE 				   VARCHAR(1)   NOT NULL,
		USERNAME 			   VARCHAR(25)  NOT NULL,
		PASSWORD_USER 		   VARCHAR(25)  NOT NULL,
		ADDRESS_USER 		   VARCHAR(250) NOT NULL,
		USER_CREATION_DATE 	   DATE         NOT NULL,
		USER_MODIFICATION_DATE DATE,
		IMAGE_USER             VARCHAR(500),
		EMAIL_USER 			   VARCHAR(250) NOT NULL,
		CONSTRAINT PK_Users PRIMARY KEY (ID_USER)
	);

	
CREATE TABLE APP.FRIENDS (
		ID_FRIENDS 	  INT 	  NOT NULL GENERATED ALWAYS AS IDENTITY  (START WITH 1 ,INCREMENT BY 1),
		ID_USER_ONE   INTEGER NOT NULL,
		ID_USER_TWO   INTEGER NOT NULL,
		FRIENDS_DATE  DATE 	  NOT NULL,
		FRIENDS_STATE VARCHAR(20),
		CONSTRAINT PK_FRIENDS            PRIMARY KEY (ID_FRIENDS),
		CONSTRAINT FK_FRIENDS_USER_ONE   FOREIGN KEY (ID_USER_ONE)   REFERENCES APP.USERS(ID_USER),
		CONSTRAINT FK_FRIENDS_USER_TWO   FOREIGN KEY (ID_USER_TWO)   REFERENCES APP.USERS(ID_USER)
	);

CREATE TABLE APP.FILM_CATEGORIE (
		ID_FILM_CATEGORIE INT           NOT NULL GENERATED ALWAYS AS IDENTITY (START WITH 1, INCREMENT BY 1),
		LIBELLE_CATEGORIE VARCHAR (100) NOT NULL,
		CONSTRAINT PK_FILM_CATEGORIE PRIMARY KEY (ID_FILM_CATEGORIE)
);
	
CREATE TABLE APP.FILM (
		ID_FILM 			   INT           NOT NULL GENERATED ALWAYS AS IDENTITY  (START WITH 1 ,INCREMENT BY 1),
		NOM_FILM 			   VARCHAR(75)   NOT NULL,
		DESCRIPTION_FILM 	   VARCHAR(1500) NOT NULL,
		DATE_RELEASED		   DATE          NOT NULL,
		NOTATION_FILM 		   INT      	 NOT NULL,
		TRAILER_FILM_LINK 	   VARCHAR(250)  NOT NULL,
		FILM_LINK 			   VARCHAR(250)  NOT NULL,
		FILM_CREATION_DATE 	   DATE          NOT NULL,
		FILM_MODIFICATION_DATE DATE,
		FILM_DURATION 		   VARCHAR(10) DEFAULT '00:00' NOT NULL,
		FILM_PG_LEVEL 		   INTEGER       NOT NULL,
		FILM_DIRECTOR 		   VARCHAR(200)  NOT NULL,
		FILM_CAST 			   VARCHAR(1000) NOT NULL,
		FILM_LANGUAGE 		   VARCHAR(30)   NOT NULL,
		FILM_IMAGE 			   VARCHAR(500)  NOT NULL,
		FILM_DISABLE_DATE 	   DATE,
		ID_CATEGORIE_FILM 	   INT 			 NOT NULL,
		CONSTRAINT PK_Film             PRIMARY KEY (ID_FILM),
		CONSTRAINT FK_FILM_CATEGORIE   FOREIGN KEY (ID_CATEGORIE_FILM) REFERENCES APP.FILM_CATEGORIE(ID_FILM_CATEGORIE)
	);
	
CREATE TABLE APP.GROUPE (
		ID_GROUPE 			 INT 		  NOT NULL GENERATED ALWAYS AS IDENTITY  (START WITH 1 ,INCREMENT BY 1),
		NOM_GROUPE 			 VARCHAR(150) NOT NULL,
		ADMIN_MESSAGE_GROUPE VARCHAR(500) NOT NULL,
		WATCHING_DATE 		 DATE 		  NOT NULL,
		ID_ADMIN 			 INT 		  NOT NULL,		
		GROUPE_CREATION_DATE DATE 		  NOT NULL,
		CONSTRAINT PK_ID_GROUPE    PRIMARY KEY (ID_GROUPE),
		CONSTRAINT FK_GROUPE_ADMIN FOREIGN KEY (ID_ADMIN)       REFERENCES APP.USERS(ID_USER)
	);
	
CREATE TABLE APP.USER_APPARTIENT_GROUPE (
		ID_APPARTIENT        INT 		  NOT NULL GENERATED ALWAYS AS IDENTITY  (START WITH 1 ,INCREMENT BY 1),
		ID_USER_APPARTIENT   INT 		  NOT NULL,
		ID_GROUPE_APPARTIENT INT 		  NOT NULL,
		USER_ADDED_DATE      DATE 		  NOT NULL,
		USER_MESSAGE         VARCHAR(500),
		USER_DATE_MESSAGE    DATE,
		USER_WATCHING        VARCHAR(10),
		CONSTRAINT PK_ID_APPARTIENT        PRIMARY KEY (ID_APPARTIENT),
		CONSTRAINT FK_ID_USER_APPARTIENT   FOREIGN KEY (ID_USER_APPARTIENT)   REFERENCES APP.USERS(ID_USER),
		CONSTRAINT FK_ID_GROUPE_APPARTIENT FOREIGN KEY (ID_GROUPE_APPARTIENT) REFERENCES APP.GROUPE(ID_GROUPE)
);

CREATE TABLE APP.FILM_CONTIENT_GROUPE (
		ID_CONTIENT        INT NOT NULL GENERATED ALWAYS AS IDENTITY  (START WITH 1 ,INCREMENT BY 1),
		ID_FILM_CONTIENT   INT NOT NULL,
		ID_GROUPE_CONTIENT INT NOT NULL,
	    CONSTRAINT PK_CONTIENT        PRIMARY KEY (ID_CONTIENT),
	    CONSTRAINT FK_CONTIENT_FILM   FOREIGN KEY (ID_FILM_CONTIENT)   REFERENCES APP.FILM(ID_FILM),
	    CONSTRAINT FK_CONTIENT_GROUPE FOREIGN KEY (ID_GROUPE_CONTIENT) REFERENCES APP.GROUPE(ID_GROUPE)
);
	